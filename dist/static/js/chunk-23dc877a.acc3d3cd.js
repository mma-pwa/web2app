(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23dc877a"],{"0a13":function(t,e,s){},"1c0a":function(t,e,s){},"20de":function(t,e,s){"use strict";s("1c0a")},2486:function(t,e,s){"use strict";s("0a13")},"4e6c":function(t,e,s){"use strict";s("747a")},6297:function(t,e,s){"use strict";s.d(e,"d",(function(){return a})),s.d(e,"i",(function(){return o})),s.d(e,"h",(function(){return n})),s.d(e,"f",(function(){return l})),s.d(e,"a",(function(){return r})),s.d(e,"j",(function(){return c})),s.d(e,"c",(function(){return d})),s.d(e,"e",(function(){return m}));var i=s("b775");function a(t){return Object(i["a"])({url:"/v2/taubm/getfeedsstatisticslist",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/v2/taubm/mediadatastat",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/v2/taubm/mediadataexport",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/v2/taubm/feedslist",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/v2/taubm/createfeeds",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/v2/taubm/updatefeeds",method:"post",data:t})}function d(){return Object(i["a"])({url:"/v2/taubm/classlist",method:"get",params:{}})}function m(t){return Object(i["a"])({url:"/v2/taubm/taurusadcommentList",method:"get",params:{id:t}})}},"6fed":function(t,e,s){"use strict";s("eda8")},"747a":function(t,e,s){},8538:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",[s("selectbar",{on:{selectFn:t.selectFn,exportFn:t.exportFn}})],1),t._v(" "),s("el-button",{staticStyle:{float:"right",position:"relative","z-index":"10","margin-bottom":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addappinfo()}}},[t._v("创建信息流")]),t._v(" "),null!=t.verifySum?s("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.statusSelect},model:{value:t.tabstatus,callback:function(e){t.tabstatus=e},expression:"tabstatus"}},[s("el-tab-pane",{attrs:{label:"全部",name:"a"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"有效",name:"b"}}),t._v(" "),s("el-tab-pane",{attrs:{name:"c"}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v("待审核"),s("span",[t._v("("),s("span",{staticClass:"tred"},[t._v(t._s(t.verifySum))]),t._v(")")])])]),t._v(" "),s("el-tab-pane",{attrs:{label:"停用",name:"d"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"未通过",name:"e"}})],1):t._e(),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"",stripe:"","header-cell-style":{background:"#f6f6f6",color:"#606266"},"highlight-current-row":"",height:t.setth,"show-overflow-tooltip":!0}},[s("el-table-column",{attrs:{align:"center",label:"信息流ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("\n          "+t._s(e.row.id)+"\n        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"信息流名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.feeds_name)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"APP 名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.application_name)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"APP ID",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.appid)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"key",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.app_key)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"接入方式",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("zjyacsstype")(e.row.access_mode))+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?s("el-tag",{attrs:{size:"small",type:""}},[t._v("待审核")]):2==e.row.status?s("el-tag",{attrs:{size:"small",type:"success"}},[t._v("有效")]):3==e.row.status?s("el-tag",{attrs:{size:"small",type:"danger"}},[t._v("停用\n          "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.remarks_stop,placement:"top"}},[s("span",{staticStyle:{margin:"0"}},[t._v("(?)")])])],1):4==e.row.status?s("el-tag",{attrs:{size:"small",type:"info"}},[t._v("无效")]):s("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("未通过\n          "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.reason,placement:"top"}},[s("span",{staticStyle:{margin:"0"}},[t._v("(?)")])])],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.createtime))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.status?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.getcode(e.row)}}},[t._v("获取投放代码")]):t._e(),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.edit(e.row)}}},[t._v("修改")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.getRemarks(e.row)}}},[t._v("历史备注")])]}}])})],1),t._v(" "),s("el-pagination",{staticClass:"page-wrap",attrs:{background:"",layout:"prev, pager, next,total","page-size":t.selectsdata.pagesize,total:t.totalcount,"current-page":t.pageindex},on:{"current-change":t.setpage}}),t._v(" "),s("remarks",{attrs:{isshow:t.isRemarkShow,id:t.remarkid},on:{closeFn:t.closeFn}}),t._v(" "),s("edit",{attrs:{isshow:t.isEditShow,formdata:t.formdata},on:{closeFn:t.closeFn,SuccFn:t.SuccFn}}),t._v(" "),s("add",{attrs:{isshow:t.isaddShow},on:{closeFn:t.closeFn,SuccFn:t.SuccFn}}),t._v(" "),s("el-dialog",{attrs:{title:"获取投放代码",visible:t.getcodeVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.getcodeVisible=e},close:t.closeFn}},[s("el-form",{attrs:{size:"mini"}},[s("el-form-item",{attrs:{label:"对接方式：","label-width":"120"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:2==t.rowli.access_mode,expression:"rowli.access_mode == 2"}]},[t._v("H5 （webview）")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==t.rowli.access_mode,expression:"rowli.access_mode == 1"}]},[t._v("API（原生）")])]),t._v(" "),s("el-form-item",{attrs:{label:"对接方法：","label-width":"120"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:2==t.rowli.access_mode,expression:"rowli.access_mode == 2"}]},[t._v("将下列url嵌入到app的webview中即可")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==t.rowli.access_mode,expression:"rowli.access_mode == 1"}]},[t._v("按照"),s("a",{staticClass:"weblink",attrs:{target:"_blank",href:"http://www.ipinyue.com/file/%E7%BD%91%E9%99%85%E6%98%9F%E8%BE%B0%E6%99%BA%E8%81%9A%E4%BA%91%E4%BF%A1%E6%81%AF%E6%B5%81API%E6%8E%A5%E5%85%A5%E6%96%87%E6%A1%A3.pdf"}},[t._v("《网际星辰智聚云信息流API接入文档》")]),t._v("进行对接")])]),t._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.rowli.access_mode,expression:"rowli.access_mode == 2"}],attrs:{label:"H5链接："}},[s("span",[t._v(t._s(t.rowli.url))])]),t._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.rowli.access_mode,expression:"rowli.access_mode == 1"}],attrs:{label:"key："}},[s("span",[t._v(t._s(t.rowli.app_key))])])],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.closeFn}},[t._v("关 闭")])],1)],1)],1)},a=[],o=s("db72"),n=s("6297"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"selectbar-wrap"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.selectsdata}},[s("el-form-item",{attrs:{label:"信息流ID:"}},[s("el-input",{attrs:{placeholder:"信息流ID"},model:{value:t.selectsdata.feeds_id,callback:function(e){t.$set(t.selectsdata,"feeds_id","string"===typeof e?e.trim():e)},expression:"selectsdata.feeds_id"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"信息流名称:"}},[s("el-input",{attrs:{placeholder:"信息流名称"},model:{value:t.selectsdata.feeds_name,callback:function(e){t.$set(t.selectsdata,"feeds_name","string"===typeof e?e.trim():e)},expression:"selectsdata.feeds_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"系统:"}},[s("el-select",{attrs:{placeholder:"系统"},model:{value:t.selectsdata.paltform,callback:function(e){t.$set(t.selectsdata,"paltform",e)},expression:"selectsdata.paltform"}},[s("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"Android",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"IOS",value:"2"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"接入方式:"}},[s("el-select",{attrs:{placeholder:"内容"},model:{value:t.selectsdata.access_mode,callback:function(e){t.$set(t.selectsdata,"access_mode",e)},expression:"selectsdata.access_mode"}},[s("el-option",{attrs:{label:"全部",value:"-1"}}),t._v(" "),s("el-option",{attrs:{label:"API(原生)",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"H5(webview)",value:"2"}})],1)],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.onSubmit(1)}}},[t._v("查询")])],1)],1)],1)},r=[],c={name:"selectbar",data:function(){return{datarange:[],isActive:29,today:new Date,labelWidth1:"100px",selectsdata:{bd_id:"",ad_name:"",application_name:"",isexport:!1}}},mounted:function(){this.onSubmit(1)},methods:{onSubmit:function(t){1==t?(this.selectsdata.isexport=!1,this.selectsdata=Object(o["a"])({},this.selectsdata),this.$emit("selectFn",this.selectsdata)):(this.selectsdata.isexport=!0,this.$emit("exportFn",this.selectsdata))},mediaFn:function(t){this.selectsdata.userid=parseInt(t)},medianameFn:function(t){},busniessFn:function(t){this.selectsdata.parentid=parseInt(t)},appFn:function(t){this.selectsdata.tpp_id=parseInt(t)},contentFn:function(t){this.selectsdata.content_id=parseInt(t)},contentnameFn:function(t){},setTimeFn:function(t){var e,s,i;this.isActive=t;var a=this.today.getFullYear(),o=this.today.getMonth()+1>=10?this.today.getMonth()+1:"0"+parseInt(this.today.getMonth()+1);if(t>=0)s=this.stamp2date(this.today),e=this.today.getTime()-864e5*t,e=new Date(e),s=new Date(s),this.datarange=[e,s];else{if(-1==t)s=this.stamp2date(this.today),i=a+"-"+o+"-01",e=new Date(i);else if(-2==t)o=parseInt(o)-1,o>0?(i=a+"-"+o+"-01",s=a+"-"+o+"-"+this.monthdate(a,o)):(a--,o=12+o,i=a+"-"+o+"-01",s=a+"-"+o+"-31");else if(-3==t){var n,l=parseInt(o)-3,r=parseInt(o)-1;l>0?(i=a+"-"+l+"-01",s=a+"-"+r+"-"+this.monthdate(a,r)):l<0&&r>0?(l=12+l,n=a-1,i=n+"-"+l+"-01",s=a+"-"+r+"-"+this.monthdate(a,r)):(l=12+l,r=12+r,n=a-1,i=n+"-"+l+"-01",s=n+"-"+r+"-"+this.monthdate(a,r))}else i=o<=3?a+"-01-01":o<=6?a+"-04-01":o<=9?a+"-07-01":a+"-10-01",s=this.stamp2date(this.today);e=new Date(i),s=new Date(s),this.datarange=[e,s]}this.onSubmit(1)},stamp2date:function(t,e){var s;s=1==e?new Date(t):t;var i=s.getMonth()+1>=10?s.getMonth()+1:"0"+parseInt(s.getMonth()+1),a=s.getDate()+1>10?s.getDate():"0"+parseInt(s.getDate());return s.getFullYear()+"-"+i+"-"+a},monthdate:function(t,e){var s;return s=2==e?t%4==0?29:28:4==e||6==e||9==e||11==e?30:31,s},setmonth:function(t,e,s){}}},d=c,m=(s("d9bd"),s("2877")),u=Object(m["a"])(d,l,r,!1,null,"26d94e9e",null),h=u.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{title:"历史备注",visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.closeForm}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"","header-cell-style":{background:"#f6f6f6",color:"#606266"},stripe:"","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"管理员","min-width":"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.display_name)+"\n      ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",type:"0","min-width":"155px",align:"center",prop:"platform"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"图片",type:"0","min-width":"130px",prop:"status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.commentImg?s("img",{staticClass:"remark-img",attrs:{src:t._f("commentImg")(e.row.commentImg)}}):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"备注内容",align:"center","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.comment)+"\n      ")]}}])})],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.closeForm}},[t._v("关闭")])],1)],1)],1)},p=[],g={props:["isshow","id"],filters:{commentImg:function(t){return"/partner/upload/image"+t}},data:function(){return{listLoading:!1,list:[],dialogFormVisible:!1}},created:function(){},watch:{isshow:{handler:function(t){this.dialogFormVisible=t,t&&this.getList(this.id)}}},methods:{getList:function(t){var e=this;this.listLoading||(this.listLoading=!0,Object(n["e"])(t).then((function(t){200==t.code&&(e.list=t.data,e.listLoading=!1,e.chartLoading&&(e.isloading=!1))})).catch((function(t){e.listLoading=!1,e.isloading=!1})))},closeForm:function(){this.$emit("closeFn",!1)}}},b=g,v=(s("20de"),Object(m["a"])(b,f,p,!1,null,"a8134346",null)),_=v.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"-7vh"},attrs:{title:"修改信息流",visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.closeForm}},[s("el-form",{ref:"vform",attrs:{model:t.form,rules:t.rules,size:"small"}},[s("select-app",{attrs:{formLabelWidth:t.formLabelWidth,showall:!0,selectedapp:t.form.tapp_id,isdisabled:2==t.status},on:{appFn:t.appFn}}),t._v(" "),s("el-form-item",{attrs:{label:"信息流名称：","label-width":t.formLabelWidth,prop:"feeds_name"}},[s("el-input",{attrs:{placeholder:"请输入信息流名称"},model:{value:t.form.feeds_name,callback:function(e){t.$set(t.form,"feeds_name","string"===typeof e?e.trim():e)},expression:"form.feeds_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"接入方式：","label-width":t.formLabelWidth}},[s("el-select",{attrs:{placeholder:"内容",disabled:2==t.status},model:{value:t.form.access_mode,callback:function(e){t.$set(t.form,"access_mode",e)},expression:"form.access_mode"}},[s("el-option",{attrs:{label:"API(原生)",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"H5(webview)",value:"2"}})],1)],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),s("el-form-item",{attrs:{label:"特殊备注：","label-width":t.formLabelWidth}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入特殊备注"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"图片：","label-width":t.formLabelWidth,prop:""}},[t.isshowimg?s("div",{staticClass:"show-img"},[s("a",{attrs:{target:"_blank",href:t.commentImg}},[s("img",{attrs:{src:t.commentImg}})])]):t._e(),t._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/partner/v2/taubm/updateimg",headers:t.headers,multiple:!1,"on-change":t.changeFile,"on-success":t.sucssFile,"on-exceed":t.limitFile,"before-upload":t.beforeupload,"before-remove":t.removeFile,"file-list":t.fileList,"auto-upload":!0,"list-type":"picture",limit:1}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isselectimg,expression:"isselectimg"}],attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择图片")])],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",loading:t.listLoading},on:{click:function(e){return t.addBtnFn("vform")}}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.closeForm}},[t._v("取 消")])],1)],1)],1)},k=[],y=(s("a481"),s("c5f6"),s("28a5"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form-item",{attrs:{label:"APP:","label-width":t.formLabelWidth}},[s("el-select",{attrs:{filterable:"",remote:"",disabled:t.isdisabled},on:{change:t.emitmedia},model:{value:t.media,callback:function(e){t.media=e},expression:"media"}},[t.showall?t._e():s("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),t._l(t.options,(function(t){return s("el-option",{key:t.app_id,attrs:{label:t.app_name,value:t.app_id,disabled:t.enable}})}))],2)],1)}),F=[],x={data:function(){return{options:[],isall:!0,media:"",company:"",currentuserid:""}},props:["selectedapp","showall","formLabelWidth","isdisabled"],created:function(){0==this.user_id||void 0==this.user_id?this.currentuserid="0":this.currentuserid=""+this.user_id,this.getList("")},watch:{selectedapp:{handler:function(t){this.media=this.selectedapp}}},methods:{emitmedia:function(t){if(this.$emit("appFn",this.media),0==this.media)return this.getList(""),this.$emit("appnameFn","");for(var e=this.options,s=0;s<e.length;s++)if(e[s].user_id==t)return this.$emit("appnameFn",e[s].company)},getList:function(t){var e=this;this.company=t,this.httpService.zjyhttp.getapplist(this.company).then((function(t){200==t.code&&(e.options=t.data.data,void 0!=e.selectedapp&&(e.media=e.selectedapp))})).catch((function(t){}))}}},L=x,S=Object(m["a"])(L,y,F,!1,null,"203fac87",null),I=S.exports,A=s("a78e"),B=s.n(A),j={props:["isshow","formdata"],components:{selectApp:I},filters:{platformFilter:function(t){return 1==t?"PC":"H5"}},data:function(){return{fileList:[],checkAll:!1,dialogFormVisible:this.isshow,tempfile:{name:""},headers:{token:B.a.get("token")},cateArr:[],checklist:[],weblink:"",webArr:[],commentImg:"",listLoading:!1,isselectimg:!0,isshowimg:!1,form:{feeds_name:"",access_mode:null,comment:"",cp_shielded:null},status:10,formLabelWidth:"120px",rules:{feeds_name:[{required:!0,message:"请输入信息流名称",trigger:"blur"}]}}},created:function(){this.getcate()},watch:{isshow:{handler:function(t){this.dialogFormVisible=t,t?(this.form.id=this.formdata.id,this.form.tapp_id=this.formdata.appid,this.form.feeds_name=this.formdata.feeds_name,this.form.access_mode=""+this.formdata.access_mode,this.status=this.formdata.status,console.log(this.status),this.checklist=this.formdata.zjy_class.split(",").map(Number),this.cateChange(this.checklist),this.form.cp_shielded=this.formdata.cp_shielded,this.form.comment=this.formdata.comment,this.form.commentImg=this.formdata.commentimg,this.form.commentImg?this.isshowimg=!0:this.isshowimg=!1,this.isselectimg=!0,this.form.commentImg&&(this.commentImg="/partner/upload/img/"+this.form.commentImg)):(this.$refs["vform"].resetFields(),this.$refs.upload.clearFiles())}}},methods:{closeForm:function(){this.$emit("closeFn",!1)},cateChange:function(t){t.length==this.cateArr.length?this.checkAll=!0:this.checkAll=!1},cateAllChange:function(t){if(t)for(var e=0;e<this.cateArr.length;e++)this.checklist.push(this.cateArr[e].id);else this.checklist=[]},addBtnFn:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.listLoading=!0,e.form.access_mode=parseInt(e.form.access_mode),e.form.zjy_class=e.checklist.join(","),Object(n["j"])(e.form).then((function(t){200==t.code&&(e.listLoading=!1,e.settip("修改成功","success"),e.$emit("SuccFn",!1))})).catch((function(t){e.settip("修改失败","error"),e.listLoading=!1}))}))},getcate:function(){var t=this;Object(n["c"])().then((function(e){200==e.code&&(t.cateArr=e.data)})).catch((function(e){t.listLoading=!1,t.isloading=!1}))},beforeupload:function(t){this.tempfile=t},changeFile:function(t,e){this.tempfile=t,this.isselectimg=!1,this.isshowimg=!1},sucssFile:function(t){200==t.code&&(this.form.commentImg=t.data)},removeFile:function(t,e){this.tempfile=t,this.isselectimg=!0},limitFile:function(t,e){console.log("img1",t,e)},appFn:function(t){this.form.tapp_id=parseInt(t)},webchange:function(t){for(var e=0;e<this.webArr.length;e++)this.form.webId==this.webArr[e].webId&&(this.weblink=this.webArr[e].domain,"http"!=this.weblink.substr(0,4)&&(this.weblink="http://"+this.weblink))},settip:function(t,e){this.$notify({title:t,offset:100,showClose:!1,type:e,duration:2500})},str2nub:function(t){1==t&&this.BdIncome?(this.BdIncome.indexOf(",")>-1&&(this.BdIncome=this.BdIncome.replace(/,/g,"")),this.form.BdIncome=parseInt(100*this.BdIncome)):2==t&&this.form.BdShow?("string"==typeof this.form.BdShow&&this.form.BdShow.indexOf(",")>-1&&(this.form.BdShow=this.form.BdShow.replace(/,/g,"")),this.form.BdShow=parseInt(this.form.BdShow)):3==t&&this.form.BdHits&&(this.form.BdHits.indexOf(",")>-1&&(this.form.BdHits=this.form.BdHits.replace(/,/g,"")),this.form.BdHits=parseInt(this.form.BdHits))}}},$=j,O=(s("2486"),Object(m["a"])($,w,k,!1,null,null,null)),C=O.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"-7vh"},attrs:{title:"创建信息流",visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.closeForm}},[s("el-form",{ref:"vform",attrs:{model:t.form,rules:t.rules,size:"small"}},[t.dialogFormVisible?s("select-app",{attrs:{formLabelWidth:t.formLabelWidth,showall:!0},on:{appFn:t.appFn}}):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"信息流名称：","label-width":t.formLabelWidth,prop:"feeds_name"}},[s("el-input",{attrs:{placeholder:"请输入信息流名称"},model:{value:t.form.feeds_name,callback:function(e){t.$set(t.form,"feeds_name","string"===typeof e?e.trim():e)},expression:"form.feeds_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"接入方式：","label-width":t.formLabelWidth,prop:"access_mode"}},[s("el-select",{attrs:{placeholder:"内容"},model:{value:t.form.access_mode,callback:function(e){t.$set(t.form,"access_mode",e)},expression:"form.access_mode"}},[s("el-option",{attrs:{label:"API(原生)",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"H5(webview)",value:"2"}})],1)],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),s("el-form-item",{attrs:{label:"特殊备注：","label-width":t.formLabelWidth}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入特殊备注"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"图片：","label-width":t.formLabelWidth,prop:""}},[t.isshowimg?s("div",{staticClass:"show-img"},[s("a",{attrs:{target:"_blank",href:t.commentImg}},[s("img",{attrs:{src:t.commentImg}})])]):t._e(),t._v(" "),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/partner/v2/taubm/updateimg",headers:t.headers,multiple:!1,"on-change":t.changeFile,"on-success":t.sucssFile,"on-exceed":t.limitFile,"before-upload":t.beforeupload,"before-remove":t.removeFile,"file-list":t.fileList,"auto-upload":!0,"list-type":"picture",limit:1}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isselectimg,expression:"isselectimg"}],attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择图片")])],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",loading:t.listLoading},on:{click:function(e){return t.addBtnFn("vform")}}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.closeForm}},[t._v("取 消")])],1)],1)],1)},z=[],H={props:["isshow","formdata"],components:{selectApp:I},filters:{platformFilter:function(t){return 1==t?"PC":"H5"}},data:function(){return{fileList:[],checkAll:!1,dialogFormVisible:this.isshow,tempfile:{name:""},headers:{token:B.a.get("token")},cateArr:[],checklist:[],weblink:"",webArr:[],commentImg:"",listLoading:!1,isselectimg:!0,isshowimg:!1,form:{feeds_name:"",access_mode:null,comment:"",cp_shielded:null},formLabelWidth:"120px",rules:{feeds_name:[{required:!0,message:"请输入点击量",trigger:"blur"}],access_mode:[{required:!0,message:"请选择接入方式",trigger:"blur"}]}}},created:function(){this.getcate()},watch:{isshow:{handler:function(t){this.dialogFormVisible=t,t||(this.$refs["vform"].resetFields(),this.$refs.upload.clearFiles(),this.isselectimg=!0)}}},methods:{closeForm:function(){this.$emit("closeFn",!1)},cateChange:function(t){t.length==this.cateArr.length?this.checkAll=!0:this.checkAll=!1},cateAllChange:function(t){if(t)for(var e=0;e<this.cateArr.length;e++)this.checklist.push(this.cateArr[e].id);else this.checklist=[]},addBtnFn:function(t){var e=this;this.$refs[t].validate((function(t){return e.form.tapp_id?t?(e.listLoading=!0,e.form.access_mode=parseInt(e.form.access_mode),e.form.zjy_class=e.checklist.join(","),void Object(n["a"])(e.form).then((function(t){200==t.code&&(e.listLoading=!1,e.settip("创建信息流成功","success"),e.$emit("SuccFn",!1))})).catch((function(t){e.settip("创建信息流失败","error"),e.listLoading=!1}))):(console.log("error submit!!"),!1):(e.settip("请选择APP,APP不能为空","warning"),!1)}))},getcate:function(){var t=this;Object(n["c"])().then((function(e){200==e.code&&(t.cateArr=e.data)})).catch((function(e){t.listLoading=!1,t.isloading=!1}))},beforeupload:function(t){this.tempfile=t},changeFile:function(t,e){this.tempfile=t,this.isselectimg=!1,this.isshowimg=!1},sucssFile:function(t){200==t.code?this.form.commentImg=t.data:(this.settip("图片上传失败","error"),this.isselectimg=!0)},removeFile:function(t,e){this.tempfile=t,this.isselectimg=!0},limitFile:function(t,e){console.log("img1",t,e)},appFn:function(t){this.form.tapp_id=parseInt(t)},webchange:function(t){for(var e=0;e<this.webArr.length;e++)this.form.webId==this.webArr[e].webId&&(this.weblink=this.webArr[e].domain,"http"!=this.weblink.substr(0,4)&&(this.weblink="http://"+this.weblink))},settip:function(t,e){this.$notify({title:t,offset:100,showClose:!1,type:e,duration:2500})},str2nub:function(t){1==t&&this.BdIncome?(this.BdIncome.indexOf(",")>-1&&(this.BdIncome=this.BdIncome.replace(/,/g,"")),this.form.BdIncome=parseInt(100*this.BdIncome)):2==t&&this.form.BdShow?("string"==typeof this.form.BdShow&&this.form.BdShow.indexOf(",")>-1&&(this.form.BdShow=this.form.BdShow.replace(/,/g,"")),this.form.BdShow=parseInt(this.form.BdShow)):3==t&&this.form.BdHits&&(this.form.BdHits.indexOf(",")>-1&&(this.form.BdHits=this.form.BdHits.replace(/,/g,"")),this.form.BdHits=parseInt(this.form.BdHits))}}},V=H,P=(s("4e6c"),Object(m["a"])(V,E,z,!1,null,null,null)),W=P.exports,D={components:{selectbar:h,remarks:_,edit:C,add:W},filters:{date:function(t){return t.substr(0,10)},backtypeFilter:function(t){return 1==t?"管理后台":2==t?"媒体后台":t},operating_type:function(t){return 1==t?"登录":2==t?"增加":3==t?"修改":4==t?"删除":t}},data:function(){return{isloading:!1,list:[],rowli:{},chartlist:[],cardlist:[],isOnoff:null,getcodeVisible:!1,isJsCodeShow:!1,isRemarkShow:!1,isaddShow:!1,isEditShow:!1,listLoading:!1,chartLoading:!1,remarkid:null,formdata:null,totalcount:0,pageindex:0,verifySum:null,tabstatus:"a",selectsdata:{pagesize:30,pageindex:0,isasc:!1,field:""},setth:this.setTableHeight.setTableh()}},created:function(){this.isloading=!0},methods:{getList:function(){var t=this;this.listLoading||(this.listLoading=!0,this.selectsdata.feeds_id=parseInt(this.selectsdata.feeds_id),Object(n["f"])(this.selectsdata).then((function(e){200==e.code&&(t.list=e.data.data,t.totalcount=e.data.totalcount,t.verifySum=e.data.Verify,t.listLoading=!1)})).catch((function(e){t.listLoading=!1,t.isloading=!1})))},selectFn:function(t,e){this.selectsdata=Object(o["a"])(Object(o["a"])({},this.selectsdata),t),this.setpage(1)},exportFn:function(t){this.selectsdata=Object(o["a"])(Object(o["a"])({},this.selectsdata),t),this.getexportFn()},getexportFn:function(){var t=this;this.listLoading=!0,adcodeman(this.selectsdata).then((function(e){200==e.code&&(t.selectsdata.isexport=!1,t.listLoading=!1,t.download(e.data))})).catch((function(e){console.log("错误",e),t.listLoading=!1,t.selectsdata.isexport=!1}))},download:function(t){var e=document.createElement("a");e.style.display="none",e.href=t,e.setAttribute("download",t),document.body.appendChild(e),e.click()},setpage:function(t){this.pageindex=t,this.selectsdata.pageindex=t-1,this.getList(this.selectsdata)},statusSelect:function(t){var e={a:0,b:2,c:1,d:3,e:5};this.selectsdata.status=e[this.tabstatus],this.setpage(1)},setconfig:function(t){this.$router.push({path:"/zjy/putman/adset",query:{id:t.id,s:t.status}})},getRemarks:function(t){console.log(t,t.id),this.remarkid=t.id,this.isRemarkShow=!0},addappinfo:function(t){this.isaddShow=!0},edit:function(t){this.formdata=t,this.isEditShow=!0},SuccFn:function(){this.verifySum=null,this.getList(),this.closeFn()},getcode:function(t){this.rowli=t,this.getcodeVisible=!0},closeFn:function(){this.isshow=!1,this.isaddShow=!1,this.isJsCodeShow=!1,this.isRemarkShow=!1,this.isEditShow=!1,this.getcodeVisible=!1}}},N=D,M=(s("6fed"),Object(m["a"])(N,i,a,!1,null,"04d629ae",null));e["default"]=M.exports},d9bd:function(t,e,s){"use strict";s("fe01")},eda8:function(t,e,s){},fe01:function(t,e,s){}}]);