(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b852d5d8"],{"0537":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",[i("selectbar",{on:{selectFn:t.selectFn,exportFn:t.exportFn}}),t._v(" "),i("el-button",{staticStyle:{float:"right",position:"relative","z-index":"10"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editInfo(!0)}}},[t._v("创建渠道")]),t._v(" "),i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"全部",name:"first"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"未上架",name:"second"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"已上架",name:"fourth"}})],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"",stripe:"","header-cell-style":{background:"#f6f6f6",color:"#606266"},"highlight-current-row":"",height:t.setth,"show-overflow-tooltip":!0},on:{"sort-change":t.tableSort}},[i("el-table-column",{attrs:{align:"center",label:"渠道ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("\n          "+t._s(e.row.id)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("statusFilter1")(e.row.status)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"result.ecpm_dis"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.created_at)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"result.income_dis",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.edit(e.row,"status")}}},[t._v(t._s(t._f("statusFilter")(e.row.status)))]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.edit(e.row,"edit")}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.edit(e.row,"del")}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),i("el-pagination",{staticClass:"page-wrap",attrs:{background:"",layout:"prev, pager, next,total","page-size":t.selectsdata.pagesize,total:t.totalcount,"current-page":t.selectsdata.page},on:{"current-change":t.setpage}}),t._v(" "),i("edit",{attrs:{isshow:t.editshow,formdata:t.formdata,isadd:t.isadd},on:{closeFn:t.closeFn,SuccFn:t.SuccFn}})],1)},a=[],n=i("db72"),o=i("1d2a"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"selectbar-wrap"},[i("el-form",{staticClass:"demo-form-inline",attrs:{model:t.selectdata,inline:!0,size:"medium "}},[i("el-form-item",{attrs:{label:"渠道："}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入ID或名称"},model:{value:t.selectdata.web_name,callback:function(e){t.$set(t.selectdata,"web_name","string"===typeof e?e.trim():e)},expression:"selectdata.web_name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1)},r=[],c=(i("df71"),{name:"selectbar",data:function(){return{selectdata:{isexport:!0,web_name:"",web_class:""},form:{webClass:""},options:[{name:"已上架",id:1},{name:"未上架",id:2}],formLabelWidth:"130px"}},methods:{emittype:function(t){this.$emit("typeFn",""+this.webClass),console.log(46,this.webClass)},onSubmit:function(){this.selectdata.web_class=parseInt(this.form.webClass),this.$emit("selectFn",this.selectdata)}},created:function(){}}),u=c,d=i("2877"),f=Object(d["a"])(u,l,r,!1,null,"29076d10",null),h=f.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{title:t.title,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.closeForm}},[i("el-form",{ref:"vform",attrs:{model:t.form,rules:t.rules,size:"small"}},[i("el-form-item",{attrs:{label:"选择应用：","label-width":t.formLabelWidth,prop:"name"}},[i("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择应用"},model:{value:t.form.app_id,callback:function(e){t.$set(t.form,"app_id",e)},expression:"form.app_id"}},t._l(t.appArr,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"url：","label-width":t.formLabelWidth,prop:"custom_url"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.custom_url,callback:function(e){t.$set(t.form,"custom_url","string"===typeof e?e.trim():e)},expression:"form.custom_url"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addBtnFn("vform")}}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:t.closeForm}},[t._v("取消")])],1)],1)],1)},p=[],b=(i("6297"),{props:["isshow","formdata","isadd"],filters:{platformFilter:function(t){return 1==t?"PC":"H5"}},data:function(){return{title:"渠道信息",dialogFormVisible:this.isshow,tempfile:{name:""},cateArr:[],checklist:[],weblink:"",webArr:[],commentImg:"",listLoading:!1,isselectimg:!0,isshowimg:!1,form:{app_id:"",custom_url:""},appArr:[],formLabelWidth:"120px",rules:{app_id:[{required:!0,message:"此项为必填项",trigger:"blur"}],custom_url:[{required:!0,message:"此项为必填项",trigger:"blur"}]}}},created:function(){this.getAppSelectList()},watch:{isshow:{handler:function(t){this.dialogFormVisible=t,t?(this.form=Object(n["a"])({},this.formdata),this.isadd?this.title="创建渠道":this.title="修改渠道信息"):this.$refs["vform"].resetFields()}}},methods:{closeForm:function(){this.$emit("closeFn",!1)},cateChange:function(t){t.length==this.cateArr.length?this.checkAll=!0:this.checkAll=!1},cateAllChange:function(t){if(t)for(var e=0;e<this.cateArr.length;e++)this.checklist.push(this.cateArr[e].id);else this.checklist=[]},getAppSelectList:function(){var t=this;this.httpService.webListHttp.getAppSelectList().then((function(e){0==e.code&&(console.log(e),t.appArr=e.data)})).catch((function(t){}))},addBtnFn:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.listLoading=!0,e.isadd?(console.log("this.form",e.form),e.httpService.webListHttp.createCustom(e.form).then((function(t){0==t.code&&(e.listLoading=!1,e.settip("创建成功","success"),e.$emit("SuccFn",!1))})).catch((function(t){e.settip("创建失败","error"),e.listLoading=!1}))):e.httpService.webListHttp.updateCustom(e.form).then((function(t){200==t.code&&(e.listLoading=!1,e.settip("修改成功","success"),e.$emit("SuccFn",!1))})).catch((function(t){e.settip("修改失败","error"),e.listLoading=!1}))}))},beforeupload:function(t){this.tempfile=t},changeFile:function(t,e){this.tempfile=t,this.isselectimg=!1,this.isshowimg=!1},sucssFile:function(t){200==t.code&&(this.form.commentImg=t.data)},removeFile:function(t,e){this.tempfile=t,this.isselectimg=!0},limitFile:function(t,e){console.log("img1",t,e)},"渠道Fn":function(t){this.form.t渠道_id=parseInt(t)},webchange:function(t){for(var e=0;e<this.webArr.length;e++)this.form.webId==this.webArr[e].webId&&(this.weblink=this.webArr[e].domain,"http"!=this.weblink.substr(0,4)&&(this.weblink="http://"+this.weblink))},settip:function(t,e){this.$notify({title:t,offset:100,showClose:!1,type:e,duration:2500})}}}),g=b,v=(i("c4db"),Object(d["a"])(g,m,p,!1,null,null,null)),w=v.exports,_={components:{selectbar:h,edit:w},filters:{date:function(t){return t.substr(0,10)},statusFilter:function(t){return 0===t?"禁用":"启用"},statusFilter1:function(t){return 0===t?"启用":"禁用"}},data:function(){return{isloading:!1,setth:this.setTableHeight.setTableh(),list:[],chartlist:[],cardlist:[],listLoading:!1,chartLoading:!1,totalcount:0,pageindex:0,selectsdata:{pagesize:30,page:1},isadd:!1,editshow:!1,activeName:"",formdata:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading||(this.listLoading=!0,this.isloading=!0,this.httpService.webListHttp.getCustomList(this.selectsdata).then((function(e){0==e.code&&(t.list=e.data.list,t.listLoading=!1,t.isloading=!1)})).catch((function(e){t.listLoading=!1,t.isloading=!1})))},edit:function(t,e){"edit"===e?this.editInfo(!1,t):"del"===e?this.deleteCustom(t):"status"===e&&this.setStatus(t)},setStatus:function(t){var e=this,i={app_id:t.app_id,custom_url:t.custom_url,status:t.status,id:t.id};i=Object(n["a"])({},t);var s=0===t.status?"禁用":"启用";this.$confirm("此操作将"+s+"该渠道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.status=0===i.status?1:0,e.httpService.webListHttp.updateCustom(i).then((function(t){0==t.code&&(e.isloading=!1,e.getList(),e.settip(s+"渠道成功","success"))})).catch((function(t){e.isloading=!1,e.settip(s+"渠道失败","error")}))})).catch((function(){}))},deleteCustom:function(t){var e=this;this.$confirm("此操作将删除该渠道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.httpService.webListHttp.delCustom({id:t.id}).then((function(t){0==t.code&&(e.isloading=!1,e.getList(),e.settip("删除渠道成功","success"))})).catch((function(t){e.isloading=!1,e.settip("删除渠道失败","error")}))})).catch((function(){}))},handleClick:function(){var t={first:0,second:1,third:3,fourth:2};this.selectdata.status=t[this.activeName],this.getList()},editInfo:function(t,e){this.isadd=t,this.formdata=t?{}:e,this.editshow=!0},SuccFn:function(){this.verifySum=null,this.closeFn(),this.getList()},closeFn:function(){this.editshow=!1},exportFn:function(t){this.selectsdata=Object(n["a"])(Object(n["a"])({},this.selectsdata),t),this.getexportFn()},getexportFn:function(){var t=this;this.listLoading=!0,this.isloading=!0,this.selectsdata.paltform=parseInt(this.selectsdata.paltform),this.selectsdata.webId=parseInt(this.selectsdata.webId),this.selectsdata.shape=parseInt(this.selectsdata.shape),Object(o["a"])(this.selectsdata).then((function(e){0==e.code&&(t.selectsdata.is_export=!1,t.isloading=!1,t.download(e.data),t.listLoading=!1)})).catch((function(e){console.log("错误",e),t.isloading=!1,t.selectsdata.is_export=!1,t.listLoading=!1}))},download:function(t){var e=document.createElement("a");e.style.display="none",e.href=t,e.setAttribute("download",t),document.body.appendChild(e),e.click()},tableSort:function(t,e,i){this.selectsdata.field=t.prop,t.order&&"ascending"==t.order?this.selectsdata.isasc=!0:this.selectsdata.isasc=!1,this.getList()},selectFn:function(t){this.selectsdata=Object(n["a"])(Object(n["a"])({},this.selectsdata),t),this.selectsdata.shape=parseInt(this.selectsdata.shape),this.setpage(1)},setpage:function(t){this.selectsdata.page=t,this.getList(this.selectsdata)}}},L=_,F=(i("2e00"),Object(d["a"])(L,s,a,!1,null,"17fbdaba",null));e["default"]=F.exports},"1d2a":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("b775");function a(t){return Object(s["a"])({url:"/v2/media/clientadstatices",method:"post",data:t})}},"2e00":function(t,e,i){"use strict";i("3c1a")},"3c1a":function(t,e,i){},"4cd9":function(t,e,i){},6297:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"i",(function(){return n})),i.d(e,"h",(function(){return o})),i.d(e,"f",(function(){return l})),i.d(e,"a",(function(){return r})),i.d(e,"j",(function(){return c})),i.d(e,"c",(function(){return u})),i.d(e,"e",(function(){return d}));var s=i("b775");function a(t){return Object(s["a"])({url:"/v2/taubm/getfeedsstatisticslist",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/v2/taubm/mediadatastat",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/v2/taubm/mediadataexport",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/v2/taubm/feedslist",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/v2/taubm/createfeeds",method:"post",data:t})}function c(t){return Object(s["a"])({url:"/v2/taubm/updatefeeds",method:"post",data:t})}function u(){return Object(s["a"])({url:"/v2/taubm/classlist",method:"get",params:{}})}function d(t){return Object(s["a"])({url:"/v2/taubm/taurusadcommentList",method:"get",params:{id:t}})}},c4db:function(t,e,i){"use strict";i("4cd9")},df71:function(t,e,i){"use strict";i("b775")}}]);